@using Project1.Models  

@{
    ViewData["Title"] = "Game";
    ViewData["DisableBootstrap"] = true; // Disable Bootstrap for this view

      var fighters = new List<Fighter>(){
         new Fighter(){Id = 1, Name = "Sub Zero", Img = "/IMG/game/subzero.jpg", Health = 130, Damage = 25},
         new Fighter(){Id = 2, Name = "Cyrax", Img = "/IMG/game/cybex.jpg", Health = 140, Damage = 25},
         new Fighter(){Id = 3, Name = "Jax", Img = "/IMG/game/jax.jpg", Health = 150, Damage = 25},
         new Fighter(){Id = 4, Name = "Johnny Cage", Img = "/IMG/game/jonny1.jpg", Health = 120, Damage = 23},
         new Fighter(){Id = 5, Name = "Kung Lao", Img = "/IMG/game/lao.jpg", Health = 120, Damage = 24},
         new Fighter(){Id = 6, Name = "Liu Kang", Img = "/IMG/game/liukang.jpg", Health = 120, Damage = 24},
         new Fighter(){Id = 7, Name = "Scorpion", Img = "/IMG/game/scorpion.jpg", Health = 130, Damage = 25},
         new Fighter(){Id = 8, Name = "Reptile", Img = "/IMG/game/reptile.jpg", Health = 130, Damage = 25},
         new Fighter(){Id = 9, Name = "Jade", Img = "/IMG/game/jade.jpg", Health = 110, Damage = 22},
         new Fighter(){Id = 10, Name = "Raiden", Img = "/IMG/game/raiden.jpg", Health = 140, Damage = 26},
         new Fighter(){Id = 11, Name = "Sonya", Img = "/IMG/game/sonya.jpg", Health = 115, Damage = 22},
         new Fighter(){Id = 12, Name = "Baraka", Img = "/IMG/game/baraka.jpg", Health = 120, Damage = 25},
         new Fighter(){Id = 13, Name = "Kitana", Img = "/IMG/game/kitana.jpg", Health = 115, Damage = 21},
         new Fighter(){Id = 14, Name = "Shao Kahn", Img = "/IMG/game/shaukan.jpg", Health = 150, Damage = 30},
         new Fighter(){Id = 15, Name = "Shang Tsung", Img = "/IMG/game/shangsung1.jpg", Health = 130, Damage = 210},
         @* new Fighter(){Id = 1, Name = "Sub Zero", Img = "/IMG/subzero.jpg", Health = 100, Damage = 15, Armor = 5, Move = 1},
         new Fighter(){Id = 2, Name = "Cyrax", Img = "/IMG/cybex.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 3, Name = "Jax", Img = "/IMG/jax.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 4, Name = "Johnny Cage", Img = "/IMG/jonny1.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 5, Name = "Kung Lao", Img = "/IMG/lao.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 6, Name = "Liu Kang", Img = "/IMG/liukang.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 7, Name = "Scorpion", Img = "/IMG/scorpion.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 8, Name = "Reptile", Img = "/IMG/reptile.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 9, Name = "Jade", Img = "/IMG/jade.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 10, Name = "Raiden", Img = "/IMG/raiden.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 11, Name = "Sonya", Img = "/IMG/sonya.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 12, Name = "Baraka", Img = "/IMG/baraka.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 13, Name = "Kitana", Img = "/IMG/kitana.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 14, Name = "Shao Kahn", Img = "/IMG/shaukan.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1},
         new Fighter(){Id = 15, Name = "Shang Tsung", Img = "/IMG/shangsung1.jpg", Health = 120, Damage = 20, Armor = 10, Move = 1}, *@
        };

    
   
}

<h1 class="header">Mortal Kombat</h1>
<hr>

<h4 >SELECT YOUR FIGHTER</h4>

<section>
    <div class="allfightersblock">
    @foreach(var fighter in fighters){
    <button class="fighterbtn" class="card-btn" data-fighter-name="@fighter.Name" data-fighter-Img ="@fighter.Img" data-fighter-health="@fighter.Health" data-fighter-damage="@fighter.Damage">
        <div class="card-container">

            <ul >
                <li class="img-container">
                    <p class="fighter-name"><b>
                    @fighter.Name
                    </b></p> 
                <img src="@fighter.Img" alt="Fighter logo" width="150" height="150"/>
                </li>
            </ul>
        </div>
    </button>
    }
</div>
</section>

<div class="empty_left_container"></div>
<div class="empty_right_container"></div>

@* When choose fighter1 --> will add new button to cancel figter  *@
<div id="figterContainer1" style="display: none; margin-top: 20px;">
@* <img src="https://www.pngkey.com/png/full/114-1149878_cancel-button-cancel-button-png.png" alt="fighter logo" width="50" height="50"/> *@
    <img alt="fighter1 logo" width="170" height="170"/>
    <br/>
    <button id="confirmFighter1" class="btn btn-primary" style="width: 120px; background-color: greenyellow; border-radius: 5px;">confirm Fighter</button> 
    <br/>
    <button id="cancelFighter1" class="btn btn-primary" style="width: 120px; background-color: rgb(209, 94, 94); border-radius: 5px;">Return</button>
</div>

@* Confirmed fighter1 block *@
<div id="confirmFighterContainer1" style="display: none; margin-top: 20px;">
    <h2 id= "headerofConfirmedFighetr1"></h2>
    <img alt="fighter1 logo" width="180" height="180"/>
    
</div>


@* Fighter2 block *@
@* When choose fighter1 --> will add new button to cancel figter  *@
<div id="figterContainer2" style="display: none; margin-top: 20px;">
   
    @* <img src="https://www.pngkey.com/png/full/114-1149878_cancel-button-cancel-button-png.png" alt="fighter logo" width="50" height="50"/> *@
    <img alt="fighter2 logo" width="170" height="170"/>
    <br/>
    <button id="confirmFighter2" class="btn btn-primary" style="width: 120px; background-color: greenyellow; border-radius: 5px;">confirm Fighter</button> 
    <br/>
    <button id="cancelFighter2" class="btn btn-primary" style="width: 120px; background-color: rgb(209, 94, 94); border-radius: 5px;">Return</button>
</div>

   

@* Confirmed fighter2 block *@
<div id="confirmFighterContainer2" style="display: none; margin-top: 20px;">
    <h2 id= "headerofConfirmedFighetr2"></h2>
    <img alt="fighter2 logo" width="180" height="180"/>
   
</div>


@* Battle block *@
<div id="battle_btn" style="display: none;">
    <h2 id="header_buttle" style="margin-bottom: 50px; color: white; display: flex; justify-content: center;">ARE YOUR READY FOR A BATTLE?</h2>
    <div class="battle_block" style="display: flex; justify-content: center;">
    <button class="btl_btn" style="width: 120px; height:40px; background-color: greenyellow; border-radius: 5px; display: flex; justify-content: center; align-items: center;">Battle</button>

    </div>
</div>

<div class="vs-block" style="display: none;">
    <img class="vs-logo" src="/IMG/game/vs_logo.png" alt="vs logo" width="150" height="150"/>
</div>


<div class="image-container" style="display: none;">
        <img class="spin-image" src="/IMG/game/dragon-logo.png" alt="Front" width="200" height="200">
</div>


<div class="outcome-block" style="display: none;">
    <h2 id="header_outcome" style="margin-top: 50px; color: white; display: flex; justify-content: center;"></h2>
    <div class="outcome" style="display: flex; justify-content: center;">
        <button class="play-again">Play again</button>
    </div>
</div>

@* <script @Url.Action("actionName", "controllerName")> *@
@* </script> *@

<script>

$(document).ready(function() {

     var audioFight = new Audio('/sounds/fight-deep-voice-172194.mp3');
     var audioSwords = new Audio('/sounds/swords-collide-230574.mp3');
     var audioFighterSelection = new Audio('/sounds/fighter-selection.mp3');    
     var audioFighterSelection2 = new Audio('/sounds/fighter-selection.mp3');    arguments //the same sound for both fighters,#battle_btn different name top don'text interfare
     //#confirmFighter1 is interfering with #confirmFighter2, it could be preventing the event from properly triggering. if we have the same name of sound .


    console.log("jQuery is working!");

    let fighter_Img1;
    let fighter_Name1;
    let fighter_Health1;
    let fighter_Damage1;

    let fighter_Img2;
    let fighter_Name2;
    let fighter_Health2;
    let fighter_Damage2;



        

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////Choose fighter1
    
        $(".fighterbtn").click(function() { // Use class instead of ID
    
    
            console.log("Fighter1 button is clicked!");

            fighter_Img1 = $(this).data("fighter-img"); // Get image URL from data attribute,#battle_btn extracts the data-fighter-Img attribute value.
            fighter_Name1 = $(this).data("fighter-name"); // Get Name from data attribute
            fighter_Health1 = $(this).data("fighter-health"); // Get Health from data attribute
            fighter_Damage1 = $(this).data("fighter-damage"); // Get Damage from data attribute

            // Example: Set the image inside a container when button is clicked
            $("#figterContainer1 img").attr("src", fighter_Img1);  // sets the src of the <img> inside #figterContainer1.
    

            $("#figterContainer1").show(); // Show the container
        
            console.log("Fighter1 Name", fighter_Name1);
            console.log("Fighter1 Health", fighter_Health1);
            console.log("Fighter1 Damage", fighter_Damage1);
        });

        //////////////////////////////////////////////////////////////////////////////////////////////////////////////cancelFighter1 function

        $("#cancelFighter1").click(function() { 
            $("#figterContainer1").hide(); // Hide figterContainer1 container
        });
  
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////confirmFighter1 function
        $("#confirmFighter1").click(function() { 

            audioFighterSelection.play();

          $("#figterContainer1").hide(); // Hide Fighter 1 selection container

            console.log("FROM confirm fighter 1", fighter_Name1);

            $("#confirmFighterContainer1 img").attr("src", fighter_Img1); // Set confirmed image
            $("#confirmFighterContainer1").fadeIn(2000).show(); // Show confirmed fighter 1 block
            $("#headerofConfirmedFighetr1").text(fighter_Name1);
            $("#confirmFighterContainer1").append("<p>Fighter 1 SELECTED!</p>");

            // Now enable Fighter 2 selection
            $(".fighterbtn").off("click").on("click", function() {
                fighter_Img2 = $(this).data("fighter-img"); // Get image URL from data attribute
                fighter_Name2 = $(this).data("fighter-name"); // Get Name from data attribute
                fighter_Health2 = $(this).data("fighter-health"); // Get Health from data attribute
                fighter_Damage2 = $(this).data("fighter-damage"); // Get Damage from data attribute

                console.log("FROM choose fighter 2", fighter_Name2);
                console.log("Fighter2 Health", fighter_Health2);
                console.log("Fighter2 Damage", fighter_Damage2);

                $("#figterContainer2 img").attr("src", fighter_Img2); arguments // sets the src of the <img> inside #figterContainer2.
                $("#figterContainer2").show(); // Show Fighter 2 selection container
            });

        });

         //////////////////////////////////////////////////////////////////////////////////////////////////////////////cancelFighter1 function

        $("#cancelFighter2").click(function() { 
        $("#figterContainer2").hide(); // Hide the container
        });


        /////////////////////////////////////////////////////////////////////////////////////////////////////confirm figter 2 
        $("#confirmFighter2").click(function() { 
            console.log("Confirm Fighter 2 clicked");

            audioFighterSelection2.play(); 

            $("#figterContainer2").hide(); // Hide the container

            @* let confirmedImg = $("#figterContainer2 img").attr("src"); // Get selected image src *@

            console.log(fighter_Name2);
            $("#confirmFighterContainer2 img").attr("src", fighter_Img2); // Set image in confirmed container
            $("#confirmFighterContainer2").fadeIn(2000).show();  // Show confirmed fighter2 block
            @* $("#confirmFighterContainer1").show();  // Show confirmed fighter1 block *@
            
            $("#headerofConfirmedFighetr2").text(fighter_Name2);

            $("#confirmFighterContainer2").append("<p>Figter 2 SELECTED!</p>");

            $("#battle_btn").delay(1000).show(500); // Show the battle button
            
            @* alert("Fighter 1 and Fighter 2 are confirmed!"); *@
        });
    


   $(".btl_btn").click(function() {

        $('.empty_left_container').hide();
        $('.empty_right_container').hide();
        $('#confirmFighterContainer1 p').hide();
        $('#confirmFighterContainer2 p').hide()
        $('#confirmFighterContainer1 img').animate({'height': '280px','width':'280px', 'position':'absolute', 'left': '10%', 'top':'300px'}, 500);
        $('#confirmFighterContainer2 img').animate({'height': '280px','width':'280px', 'position':'absolute', 'right': '10%', 'top':'300px'}, 500);

        audioSwords.play();

        $(".vs-block").fadeIn(900).fadeOut(500);

        setTimeout(function () {
            $(".image-container").fadeIn();
        }, 2000);
        

        setTimeout(function () {
            audioFight.play();
        }, 2000);

       
        $('section, h4, #battle_btn').hide();

        console.log("Battle is started!");

        @* alert("Battle is started!"); *@

        function fight() {
        if (fighter_Health1 > 0 && fighter_Health2 > 0) {
            fighter_Health1 -= fighter_Damage2;
            fighter_Health2 -= fighter_Damage1;

            console.log("Fighter1 Health: ", fighter_Health1);
            console.log("Fighter2 Health: ", fighter_Health2);

            setTimeout(fight, 500); // Continue the battle with a delay
        } else {
            $(".outcome-block").show();

            if (fighter_Health1 <= 0 && fighter_Health2 <= 0) {
                console.log("Both fighters are dead!");
                $("#header_outcome").text("Both fighters are dead!");
            } else if (fighter_Health1 <= 0) {
                console.log("Fighter 1 is dead!");
                $("#header_outcome").text("Fighter 2 WON!");
            } else if (fighter_Health2 <= 0) {
                console.log("Fighter 2 is dead!");
                $("#header_outcome").text("Fighter 1 WON!");
            }
        }
    }

    fight(); // Start the fight
});

$(".play-again").click(function() {
    location.reload(); // Reload the page


});

  
}); 

</script>